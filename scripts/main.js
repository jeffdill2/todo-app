function Task(a){switch(!0){case a.length<=0:throw new Error("The description may not be left blank!");default:this.description=a,this.date=Date.now()}}function loadTasks(){tasksCollection.fetch().done(function(){tasksCollection.each(function(a){new TaskView({model:a})})})}var strTasksURL="http://tiny-pizza-server.herokuapp.com/collections/jdill-todo-app";$(document).ready(function(){loadTasks(),$(".form-description").focus()}),TaskModel=Backbone.Model.extend({initialize:function(){this.on("change",function(){})},defaults:{},idAttribute:"_id"}),TaskView=Backbone.View.extend({taskListTemplate:_.template($(".task-list-template").text()),taskEditTemplate:_.template($(".task-list-edit-template").text()),events:{"click .task-modify-button":"showEdit","click .task-save-button":"saveChanges","click .task-delete-button":"destroy"},initialize:function(){this.listenTo(this.model,"change",this.render),$(".task-list").prepend(this.el),this.render()},render:function(){var a=this.taskListTemplate(this.model.attributes);this.$el.html(a)},showEdit:function(){var a=this.taskEditTemplate(this.model.attributes);this.$el.html(a)},saveChanges:function(){var a=this.$el.find(".task-description input").val();this.model.set("description",a),this.model.save()},destroy:function(){this.model.destroy(),this.remove()}}),TaskCollection=Backbone.Collection.extend({model:TaskModel,url:strTasksURL});var tasksCollection=new TaskCollection;$(".submit-button").click(function(){var a=new Task($(".form-description").val()),b=tasksCollection.add(a);b.save(),new TaskView({model:b}),$(".form-description").val(""),$(".form-description").focus()}),$(".form-description").keypress(function(a){"13"==a.keyCode&&(a.preventDefault(),$(".submit-button").trigger("click"))});